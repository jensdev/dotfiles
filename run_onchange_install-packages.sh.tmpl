#!/bin/bash

set -euo pipefail
echo Running on {{.chezmoi.osRelease.id}}
{{ if eq .chezmoi.os "darwin" }}
# macOS-specific code
{{ else if eq .chezmoi.os "linux" }}
    {{ if eq .chezmoi.osRelease.id "ubuntu" }}
        {{ includeTemplate ".chezmoiscripts/.install-packages-ubuntu.sh.tmpl" .  }}
    {{ else if eq .chezmoi.osRelease.id "fedora" }}
        {{ if eq .chezmoi.osRelease.variant_id "kinoite" }}
            {{ includeTemplate ".chezmoiscripts/run_onchange_install-packages-kinoite.sh.tmpl" .  }}
        {{ else }}
            {{ includeTemplate ".chezmoiscripts/.install-packages-fedora.sh.tmpl" .  }}
        {{ end }}
    {{ end }}
    {{ includeTemplate ".chezmoiscripts/.install-packages-linux-shared.sh.tmpl" . }}
{{ end }}
